# Changelog

## [0.5.5-beta.1]（Pre-release）
### 主な変更点
- **スケール補正処理を強化**：`ApplyScaleModifiers` を取り込み、衣装変換時のスケール反映をより正確にしました
- **変換ログ基盤を再構成**：ログ出力を `OCTConversionLogger` に分離し、件数上限を定数化したうえで上限値を 1000 まで拡張しました
- **Modular Avatar 連携コードを整理**：連携ロジックを `OCTModularAvatarUtility` 中心に統合し、関連ユーティリティの責務を明確化しました
- **ローカライズを調整**：韓国語ロケールのエイリアスを `ko_KR` に調整し、文言アクセス経路を統一しました
- **コードベース構造を整理**：`OCT` プレフィックスへの命名統一、ディレクトリ再編、開発者向けコメント整備を実施しました
- **リリース運用を更新**：バージョン更新スクリプト追従と `package.json` の更新を行い、パッケージ版を **0.5.5-beta.1** に更新しました

## [0.5.4]
### 主な変更点
- なし

## [0.5.4-beta.3]（Pre-release）
### 主な変更点
- 配布データに利用規約を追加

## [0.5.4-beta.2]（Pre-release）
### 主な変更点
- **バージョン比較の正確性を改善**：安定版と `-beta` の優先順位判定を見直し、更新通知の順序が崩れるケースを修正しました
- **プレリリース数値比較を堅牢化**：`beta` の数値識別子の検証を厳密化し、想定外フォーマットや極端に大きい数値でも安全に比較できるようにしました
- **更新案内メッセージを調整**：日本語の「最新版」案内文を改善し、同一情報の重複表示を避けて読みやすくしました
- **パッケージバージョンを更新**：配布バージョンを **0.5.4-beta.2** に更新しました

## [0.5.4-beta.1]（Pre-release）
### 主な変更点
- **更新チェックの安定性を強化**：`latest.json` の読み取り・検証を見直し、想定外フォーマットや不正値が来た場合でも安全に扱えるようにしました
- **バージョン判定の挙動を明確化**：対応するバージョン文字列パターンを厳密化し、旧式 `-beta` 表記を意図どおり判定対象外にするなど、更新案内の誤判定を減らしました
- **案内メッセージを改善**：バージョン情報やURLが不正なときのメッセージを多言語でわかりやすく調整し、原因を追いやすくしました
- **変換処理まわりの内部整理**：変換パイプラインのコメント・命名・補助ユーティリティを整理し、保守しやすさと失敗時の追跡性を改善しました

### Assets
- `VersionUtility` を `LatestJsonParser` / `VersionComparer` に分離し、責務を分けて可読性とテストしやすさを向上
- パッケージID取得や `latest.json` スキーマ検証を強化し、パッケージ配置差異やデータ欠損への耐性を向上
- 重複名処理・変換補助ユーティリティ・ローカライズ文言（ja/en/ko/zh-Hans/zh-Hant）を更新
- パッケージバージョンを **0.5.4-beta.1** に更新

### Tools/release
- リリース関連資産を `Tools/release` 配下へ集約し、参照パスと運用導線を標準化
- `update_version.py` / `create_vpm_zip.py` のルート検出や運用手順を見直し、リリース作業の再現性を向上
- `conversion-pipeline-flow.svg` と README を実装に合わせて更新し、オンボーディング時の理解コストを低減

## [0.5.3-beta]（Pre-release）
### 主な変更点
- ツールで使用する画像を追加・更新し、操作画面の見た目を把握しやすくしました
- 変換時に、すでに非表示のオブジェクトを重ねて非表示にしないよう改善し、処理を安定化しました
- 複製時のオブジェクト名重複チェックを Unity 標準の仕組みに置き換え、名前の重なりを起こしにくくしました
- 名前が空に近いオブジェクトで連番サフィックスが崩れる不具合を修正しました

## [0.5.2-beta]（2026-02-06 / commit履歴ベース）
### 主な変更点
- ツールウィンドウの表示ロジックを整理し、バージョン状態表示の描画処理を読みやすく再構成しました
- ウィンドウ内セクションの視認性向上のため、背景の濃色化と塗り範囲の最適化を行いました
- 最新バージョン確認中フラグの制御を見直し、コールバック後に状態が残るケースを起きにくくしました
- パッケージバージョンを **0.5.2-beta** に更新しました

## [0.5.1]（2026-02-06）
### Fixed
- ドキュメント内の「Discordへ問い合わせ」導線表示を修正

### Changed
- 日本語向けのツール名表記を公式名称に統一
- バージョンを 0.5.1 に更新

## [0.5.0]（2026-02-06）
### Changed
- テストデータ環境の引っ越し
- バージョンアップ処理の自動化
- Webサイト作成

## [0.3.0]（2026-01-31）
顔メッシュ判定の安定性改善／Prefab検索キャッシュの保存先変更

### Added
- 顔メッシュの識別子を **FaceMeshSignature** として拡張（Mesh GUID/LocalId に加えて、Prefab/FBX/AssetPath 情報も保持）
- FaceMeshSignature の一致判定を追加（MeshId一致に加え、Prefab GUID/Name・FBX GUID/Name・AssetPath でも一致判定できる）

### Changed
- Prefab検索キャッシュの保存先を **EditorUserSettings** から **Library/Aramaa/OchibiChansConverterTool/FaceMeshCache.v7.json** に変更（VCS非対象のローカルキャッシュ）
- キャッシュ互換バージョンを **v1 → v7** に更新（保存項目に PrefabGuid/PrefabName/FbxGuid/FbxName/FaceMeshAssetPath を追加）
- 顔メッシュ取得処理を MeshId ベースから Signature ベースへ変更（TryGetFaceMeshId → TryGetFaceMeshSignature）

---

## [0.2.9] - 2026-01-28
### Added
- VPMパッケージ化対応 (`package.json` の追加)
- VCC配布用ZIP生成スクリプトを追加
- アバターのルートにMA Mesh Settingsがアタッチされている場合に不具合が起きないように修正（ピューマのぷまちゃん等）
- キャッシュデータの保存形式をEditorUserSettingsに変更
- 最新Verの取得ロジックをpackage.jsonから取得するように変更

---

## [0.2.8] - 2026-01-27
> **髪や小物がずれるケース向けの改善 ＋ UI整理**

### Added
- 「髪／小物がずれる場合はON」オプションを追加 (MA Bone Proxy 対応)
- 「困ったらDiscordへ（不具合報告・質問）」ボタンを追加
- ログ出力項目に「ツールver」「VRCSDK ver」を追加

### Fixed
- 衣装スケール調整時のボーン探索アルゴリズムを改善

### Changed
- 画面上の操作手順ガイドと文言をより分かりやすく整理

---

## [0.2.7] - 2026-01-25
### Added
- プルダウンから選択できない場合におちびちゃんPrefabを手動指定できる機能を追加

### Fixed
- 複製されたアバターの `PipelineManager` ID が残ってしまう問題を修正 (空に設定)

### Removed
- プラム胸のPhysBone無効化処理を廃止 (仕様変更)

---

## [0.2.6] - 2026-01-24
### Added
- テスター募集開始
